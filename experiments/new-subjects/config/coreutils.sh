#!gbin/bash

BUILD_COMMAND="make distclean; ./configure --disable-threads; make clean; make all -j 1"
SKIPPED_TESTS='misc/help-version misc/invalid-opt tail-2/inotify-race tail-2/inotify-hash-abuse tail-2/inotify-hash-abuse2 tail-2/F-vs-missing tail-2/F-vs-rename tail-2/inotify-rotate misc/ls-time rm/deep-2 rm/empty-inacc rm/fail-eacces tail-2/infloop-1 rm/inaccessible rm/unread3 misc/env tail-2/tail-n0f misc/ls-misc tail-2/pid misc/mktemp misc/pwd-option misc/pwd-unreadable-parent misc/cat-buf misc/close-stdout misc/csplit-1000 misc/env-null misc/head-c misc/head-pos rm/rm3 misc/mknod misc/od-N misc/pwd-long misc/readlink-fp-loop misc/shred-exact misc/shred-passes misc/shuf misc/sort misc/sort-compress misc/sort-continue misc/sort-merge misc/sort-month misc/sort-rand misc/sort-spinlock-abuse misc/sort-unique-segv misc/split-lchunk misc/sort-version misc/stat-mount misc/stat-slash misc/stdbuf misc/tac misc/timeout misc/timeout-parameters rm/isatty touch/empty-file misc/sort-float misc/stat-birthtime tail-2/wait chmod/thru-dangling chown/deref cp/abuse cp/cp-HL cp/cp-deref cp/cp-parents cp/deref-slink cp/into-self cp/link-no-deref cp/link-preserve cp/preserve-slink-time cp/r-vs-symlink cp/same-file cp/slink-2-slink cp/symlink-slash cp/thru-dangling dd/misc dd/not-rewound dd/reblock dd/skip-seek dd/skip-seek2 dd/skip-seek-past-file dd/stderr du/8gb du/deref du/deref-args du/inaccessible-cwd du/long-from-unreadable du/long-sloop du/no-deref du/trailing-slash install/basic-1 install/install-C install/strip-program ln/backup-1 ln/hard-to-sym ln/misc ln/sf-1 ln/target-1 ls/dangle ls/follow-slink ls/infloop ls/inode ls/no-arg ls/stat-dtype ls/stat-failed ls/stat-free-symlinks ls/symlink-slash mkdir/p-3 mkdir/p-thru-slink mv/atomic mv/atomic2 mv/force mv/hard-2 mv/hard-3 mv/hard-4 mv/hard-link-1 mv/hard-verbose mv/i-link-no mv/into-self mv/into-self-2 mv/into-self-3 mv/into-self-4 mv/mv-special-1 mv/part-hardlink mv/part-symlink mv/to-symlink mv/trailing-slash readlink/can-e readlink/can-f readlink/can-m readlink/rl-1 tail-2/flush-initial tail-2/pipe-f tail-2/start-middle touch/no-dereference touch/trailing-slash misc/od-x8 chmod/usage mv/i-3 '
TESTS='rm/ext3-perf rm/cycle cp/link-heap chmod/no-x chgrp/basic rm/dangling-symlink rm/deep-1 rm/dir-no-w rm/dir-nonrecur rm/dot-rel rm/empty-name rm/f-1 rm/fail-eperm tail-2/assert rm/hash rm/i-1 rm/i-never rm/i-no-r rm/ignorable rm/interactive-always rm/interactive-once rm/ir-1 rm/one-file-system2 rm/r-1 rm/r-2 rm/r-3 rm/r-4 rm/readdir-bug rm/rm1 rm/rm2 rm/rm4 rm/rm5 rm/sunos-1 rm/unread2 rm/unreadable rm/v-slash chgrp/default-no-deref chgrp/deref chgrp/no-x chgrp/posix-H chgrp/recurse misc/ptx misc/test misc/seq misc/seq-long-double misc/head misc/head-elide-tail misc/date misc/date-next-dow misc/ptx-overrun misc/xstrtol misc/od misc/od-float misc/arch misc/pr misc/join pr/pr-tests misc/df-P misc/chcon-fail misc/cut misc/wc misc/wc-files0-from misc/wc-files0 misc/wc-parallel misc/cat-proc misc/base64 misc/basename misc/chroot-fail misc/comm misc/csplit misc/csplit-heap misc/date-sec misc/dircolors misc/df misc/dirname misc/expand misc/expr misc/factor misc/false-status misc/fmt misc/fmt-long-line misc/fold misc/groups-dash misc/groups-version misc/id-context misc/id-groups misc/md5sum misc/md5sum-newline misc/md5sum-parallel misc/nice misc/nice-fail misc/nl misc/nohup misc/nproc-avail misc/nproc-positive misc/od-multiple-t misc/paste misc/pathchk1 misc/printenv misc/printf misc/printf-cov misc/printf-hex misc/printf-surprise misc/runcon-no-reorder misc/sha1sum misc/sha1sum-vec misc/sha224sum misc/sha256sum misc/sha384sum misc/sha512sum misc/shred-remove misc/sort-benchmark-random misc/sort-compress-hang misc/sort-compress-proc misc/sort-debug-keys misc/sort-debug-warn misc/sort-files0-from misc/sort-merge-fdlimit misc/sort-stale-thread-mem misc/sort-unique misc/split-a misc/split-bchunk misc/split-fail misc/split-l misc/split-rchunk misc/stat-fmt misc/stat-hyphen misc/stat-nanoseconds misc/stat-printf misc/stty misc/stty-invalid misc/stty-row-col misc/su-fail misc/sum misc/sum-sysv misc/tac-continue misc/tail misc/tee misc/tee-dash misc/test-diag misc/tr misc/tr-case-class misc/truncate-dangling-symlink misc/truncate-dir-fail misc/truncate-fail-diag misc/truncate-fifo misc/truncate-no-create-missing misc/truncate-overflow misc/truncate-parameters misc/truncate-relative misc/tsort misc/tty-eof misc/unexpand misc/uniq misc/xattr chmod/c-option chmod/equal-x chmod/equals chmod/inaccessible chmod/octal chmod/setgid chmod/silent chmod/umask-x chown/preserve-root chown/separator cp/acl cp/backup-1 cp/backup-dir cp/backup-is-src cp/cp-i cp/cp-mv-backup cp/dir-rm-dest cp/dir-slash cp/dir-vs-file cp/existing-perm-race cp/fail-perm cp/file-perm-race cp/link cp/no-deref-link1 cp/no-deref-link2 cp/no-deref-link3 cp/parent-perm cp/parent-perm-race cp/perm cp/preserve-2 cp/proc-short-read cp/proc-zero-len cp/reflink-auto cp/reflink-perm cp/sparse cp/special-f cp/src-base-dot df/unreadable dd/direct dd/unblock dd/unblock-sync df/total-verify du/2g du/basic du/bigtime du/exclude du/fd-leak du/files0-from du/hard-link du/inacc-dest du/inacc-dir du/max-depth du/no-x du/one-file-system du/restore-wd du/slash du/slink du/two-args id/no-context install/create-leading install/d-slashdot install/install-C-selinux install/trap ln/hard-backup ln/slash-decorated-nonexistent-dest ls/abmon-align ls/color-clear-to-eol ls/color-dtype-dir ls/color-norm ls/dired ls/file-type ls/m-option ls/multihardlink ls/no-cap ls/proc-selinux-segfault ls/readdir-mountpoint-inode ls/recursive ls/rt-1 ls/stat-vs-dirent ls/x-option mkdir/p-1 mkdir/p-2 mkdir/p-slashdot mkdir/p-v mkdir/parents mkdir/perm mkdir/selinux mkdir/special-1 mkdir/t-slash mv/acl mv/backup-dir mv/backup-is-src mv/childproof mv/diag mv/dir-file mv/dir2dir mv/dup-source mv/i-1 mv/i-2 mv/i-4 mv/i-5 mv/leak-fd mv/mv-n mv/no-target-dir mv/part-fail mv/part-rename mv/partition-perm mv/perm-1 mv/update rmdir/fail-perm rmdir/ignore rmdir/t-slash tail-2/assert-2 tail-2/big-4gb tail-2/follow-stdin tail-2/pipe-f2 tail-2/proc-ksyms touch/60-seconds touch/dangling-symlink touch/dir-1 touch/fail-diag touch/fifo touch/no-create-missing touch/no-rights touch/not-owner touch/obsolescent touch/read-only touch/relative chown/basic cp/cp-a-selinux cp/preserve-gid cp/special-bits cp/cp-mv-enotsup-xattr cp/capability dd/skip-seek-past-dev install/install-C-root ls/capability ls/nameless-uid misc/chcon misc/chroot-credentials misc/selinux misc/truncate-owned-by-other mkdir/writable-under-readonly mv/sticky-to-xpart rm/fail-2eperm rm/no-give-up rm/one-file-system rm/read-only tail-2/append-only touch/now-owned-by-other'

ALL_RUNNING_TESTS_ON_OUR_PLATFORM='misc/help-version misc/invalid-opt tail-2/inotify-race tail-2/inotify-hash-abuse tail-2/inotify-hash-abuse2 tail-2/F-vs-missing tail-2/F-vs-rename tail-2/inotify-rotate misc/ls-time rm/deep-2 rm/empty-inacc rm/fail-eacces tail-2/infloop-1 rm/inaccessible rm/unread3 misc/env tail-2/tail-n0f misc/ls-misc tail-2/pid misc/mktemp misc/pwd-option misc/pwd-unreadable-parent misc/cat-buf misc/close-stdout misc/csplit-1000 misc/head-c misc/head-pos rm/rm3 misc/mknod misc/od-N misc/pwd-long misc/readlink-fp-loop misc/shred-exact misc/shred-passes misc/shuf misc/sort misc/sort-compress misc/sort-continue misc/sort-merge misc/sort-month misc/sort-rand misc/sort-spinlock-abuse misc/sort-unique-segv misc/split-lchunk misc/sort-version misc/stat-mount misc/stat-slash misc/stdbuf misc/tac misc/timeout misc/timeout-parameters rm/isatty touch/empty-file misc/sort-float misc/stat-birthtime tail-2/wait chmod/thru-dangling chown/deref cp/abuse cp/cp-HL cp/cp-deref cp/cp-parents cp/deref-slink cp/into-self cp/link-no-deref cp/link-preserve cp/preserve-slink-time cp/r-vs-symlink cp/same-file cp/slink-2-slink cp/symlink-slash cp/thru-dangling dd/misc dd/not-rewound dd/reblock dd/skip-seek dd/skip-seek2 dd/skip-seek-past-file dd/stderr du/8gb du/deref du/deref-args du/inaccessible-cwd du/long-from-unreadable du/long-sloop du/no-deref du/trailing-slash install/basic-1 install/install-C install/strip-program ln/backup-1 ln/hard-to-sym ln/misc ln/sf-1 ln/target-1 ls/dangle ls/follow-slink ls/infloop ls/inode ls/no-arg ls/stat-dtype ls/stat-failed ls/stat-free-symlinks ls/symlink-slash mkdir/p-3 mkdir/p-thru-slink mv/atomic mv/atomic2 mv/force mv/hard-2 mv/hard-3 mv/hard-4 mv/hard-link-1 mv/hard-verbose mv/i-link-no mv/into-self mv/into-self-2 mv/into-self-3 mv/into-self-4 mv/mv-special-1 mv/part-hardlink mv/part-symlink mv/to-symlink mv/trailing-slash readlink/can-e readlink/can-f readlink/can-m readlink/rl-1 tail-2/flush-initial tail-2/pipe-f tail-2/start-middle touch/no-dereference touch/trailing-slash misc/od-x8 chmod/usage mv/i-3  rm/ext3-perf rm/cycle cp/link-heap chmod/no-x chgrp/basic rm/dangling-symlink rm/deep-1 rm/dir-no-w rm/dir-nonrecur rm/dot-rel rm/empty-name rm/f-1 rm/fail-eperm tail-2/assert rm/hash rm/i-1 rm/i-never rm/i-no-r rm/ignorable rm/interactive-always rm/interactive-once rm/ir-1 rm/one-file-system2 rm/r-1 rm/r-2 rm/r-3 rm/r-4 rm/readdir-bug rm/rm1 rm/rm2 rm/rm4 rm/rm5 rm/sunos-1 rm/unread2 rm/unreadable rm/v-slash chgrp/default-no-deref chgrp/deref chgrp/no-x chgrp/posix-H chgrp/recurse misc/ptx misc/test misc/seq misc/seq-long-double misc/head misc/head-elide-tail misc/date misc/date-next-dow misc/ptx-overrun misc/xstrtol misc/od misc/od-float misc/arch misc/pr misc/join pr/pr-tests misc/df-P misc/chcon-fail misc/cut misc/wc misc/wc-files0-from misc/wc-files0 misc/wc-parallel misc/cat-proc misc/base64 misc/basename misc/chroot-fail misc/comm misc/csplit misc/csplit-heap misc/date-sec misc/dircolors misc/df misc/dirname misc/expand misc/expr misc/factor misc/false-status misc/fmt misc/fmt-long-line misc/fold misc/groups-dash misc/groups-version misc/id-context misc/id-groups misc/md5sum misc/md5sum-newline misc/md5sum-parallel misc/nice misc/nice-fail misc/nl misc/nohup misc/nproc-avail misc/nproc-positive misc/od-multiple-t misc/paste misc/pathchk1 misc/printenv misc/printf misc/printf-cov misc/printf-hex misc/printf-surprise misc/runcon-no-reorder misc/sha1sum misc/sha1sum-vec misc/sha224sum misc/sha256sum misc/sha384sum misc/sha512sum misc/shred-remove misc/sort-benchmark-random misc/sort-compress-hang misc/sort-compress-proc misc/sort-debug-keys misc/sort-debug-warn misc/sort-files0-from misc/sort-merge-fdlimit misc/sort-stale-thread-mem misc/sort-unique misc/split-a misc/split-bchunk misc/split-fail misc/split-l misc/split-rchunk misc/stat-fmt misc/stat-hyphen misc/stat-nanoseconds misc/stat-printf misc/stty misc/stty-invalid misc/stty-row-col misc/su-fail misc/sum misc/sum-sysv misc/tac-continue misc/tail misc/tee misc/tee-dash misc/test-diag misc/tr misc/tr-case-class misc/truncate-dangling-symlink misc/truncate-dir-fail misc/truncate-fail-diag misc/truncate-fifo misc/truncate-no-create-missing misc/truncate-overflow misc/truncate-parameters misc/truncate-relative misc/tsort misc/tty-eof misc/unexpand misc/uniq misc/xattr chmod/c-option chmod/equal-x chmod/equals chmod/inaccessible chmod/octal chmod/setgid chmod/silent chmod/umask-x chown/preserve-root chown/separator cp/acl cp/backup-1 cp/backup-dir cp/backup-is-src cp/cp-i cp/cp-mv-backup cp/dir-rm-dest cp/dir-slash cp/dir-vs-file cp/existing-perm-race cp/fail-perm cp/file-perm-race cp/link cp/no-deref-link1 cp/no-deref-link2 cp/no-deref-link3 cp/parent-perm cp/parent-perm-race cp/perm cp/preserve-2 cp/proc-short-read cp/proc-zero-len cp/reflink-auto cp/reflink-perm cp/sparse cp/special-f cp/src-base-dot df/unreadable dd/direct dd/unblock dd/unblock-sync df/total-verify du/2g du/basic du/bigtime du/exclude du/fd-leak du/files0-from du/hard-link du/inacc-dest du/inacc-dir du/max-depth du/no-x du/one-file-system du/restore-wd du/slash du/slink du/two-args id/no-context install/create-leading install/d-slashdot install/install-C-selinux install/trap ln/hard-backup ln/slash-decorated-nonexistent-dest ls/abmon-align ls/color-clear-to-eol ls/color-dtype-dir ls/color-norm ls/dired ls/file-type ls/m-option ls/multihardlink ls/no-cap ls/proc-selinux-segfault ls/readdir-mountpoint-inode ls/recursive ls/rt-1 ls/stat-vs-dirent ls/x-option mkdir/p-1 mkdir/p-2 mkdir/p-slashdot mkdir/p-v mkdir/parents mkdir/perm mkdir/selinux mkdir/special-1 mkdir/t-slash mv/acl mv/backup-dir mv/backup-is-src mv/childproof mv/diag mv/dir-file mv/dir2dir mv/dup-source mv/i-1 mv/i-2 mv/i-4 mv/i-5 mv/leak-fd mv/mv-n mv/no-target-dir mv/part-fail mv/part-rename mv/partition-perm mv/perm-1 mv/update rmdir/fail-perm rmdir/ignore rmdir/t-slash tail-2/assert-2 tail-2/big-4gb tail-2/follow-stdin tail-2/pipe-f2 tail-2/proc-ksyms touch/60-seconds touch/dangling-symlink touch/dir-1 touch/fail-diag touch/fifo touch/no-create-missing touch/no-rights touch/not-owner touch/obsolescent touch/read-only touch/relative chown/basic cp/cp-a-selinux cp/preserve-gid cp/special-bits cp/cp-mv-enotsup-xattr cp/capability dd/skip-seek-past-dev install/install-C-root ls/capability ls/nameless-uid misc/chcon misc/chroot-credentials misc/selinux misc/truncate-owned-by-other mkdir/writable-under-readonly mv/sticky-to-xpart rm/fail-2eperm rm/no-give-up rm/one-file-system rm/read-only tail-2/append-only touch/now-owned-by-other'
RUN_COMMAND="cd tests; make check TESTS=\"${TESTS}\""
#RUN_COMMAND="cd tests; make check TESTS=\"${ALL_RUNNING_TESTS_ON_OUR_PLATFORM}\""
